# AI Agent 开发规则

通用配置文件，适用于不支持特定 steering 机制的编辑器。

## 基本规则

1. **始终使用中文输出**
2. **修改前先读取现有文档**

## 文档维护规范

### 分形结构要求
- 每个文件夹必须有 README.md（3行以内架构说明 + 文件索引）
- 每个文件开头必须有三行注释（input/output/pos）
- 文件变更时必须更新开头注释和所属文件夹的索引文档
- 维护局部影响整体、整体影响局部的自指结构

### 0. 先读取现有文档（重要！）

修改文件前，**必须先检查并读取**：
- 所属文件夹是否已有 README.md？**如果有，先读取它**
- 文件是否已有头部注释？**如果有，保留并更新**

⚠️ **禁止直接覆盖创建**：不要在不读取的情况下直接创建 README.md！

### 文件头部注释模板

Go 文件：
```go
// input: {输入描述}
// output: {输出描述}
// pos: {架构位置描述}
// 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

TypeScript 文件：
```typescript
// input: {输入描述}
// output: {输出描述}
// pos: {架构位置描述}
// 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

Python 文件：
```python
# input: {输入描述}
# output: {输出描述}
# pos: {架构位置描述}
# 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

Rust 文件：
```rust
//! input: {输入描述}
//! output: {输出描述}
//! pos: {架构位置描述}
//! 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

### 文件夹 README.md 模板

```markdown
# {文件夹名}

<!-- 一旦我所属的文件夹有所变化，请更新我 -->

## 架构说明

{3行以内的架构描述}

## 文件索引

- `file1.go` - 功能描述
- `file2.go` - 功能描述

## 更新提醒

任何文件变更后，请更新此文档和相关的上级文档。
```

### 执行清单

完成代码修改后，按以下格式输出文档维护报告：

```
## 文档维护报告

### 修改的文件
- `path/to/file.go` - [新建/修改]

### 文件注释状态
- ✅ 已有标准注释 / ⚠️ 已更新注释 / 🆕 已添加注释

### README.md 更新
- `path/to/folder/README.md` - [已更新/已创建/无需更新]

### 上级目录检查
- `parent/folder/README.md` - [已更新/无需更新]
```

## 项目结构索引

<!-- 自定义此部分以匹配你的项目 -->

### 示例目录
- `src/components/README.md` - 组件目录索引
- `src/services/README.md` - 服务层索引
- `src/models/README.md` - 数据模型索引

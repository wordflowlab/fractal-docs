# Cline AI 规则 - Fractal Docs

## 基本规则

1. 始终使用中文输出
2. 修改前先读取现有文档

## 文档维护规范

### 0. 先读取现有文档（重要！）

修改文件前，**必须先检查并读取**：
- 所属文件夹是否已有 README.md？**如果有，先读取它**
- 文件是否已有头部注释？**如果有，保留并更新**

⚠️ **禁止直接覆盖创建**：不要在不读取的情况下直接创建 README.md！

### 1. 文件头部注释

每个代码文件必须有标准三行注释：

Go 文件：
```go
// input: {输入描述}
// output: {输出描述}
// pos: {架构位置描述}
// 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

TypeScript 文件：
```typescript
// input: {输入描述}
// output: {输出描述}
// pos: {架构位置描述}
// 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

Python 文件：
```python
# input: {输入描述}
# output: {输出描述}
# pos: {架构位置描述}
# 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

Rust 文件：
```rust
//! input: {输入描述}
//! output: {输出描述}
//! pos: {架构位置描述}
//! 一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md
```

### 2. 文件夹 README.md

修改文件后，必须更新所属文件夹的 README.md：

- **如果 README.md 已存在**：先读取，然后增量更新文件索引部分
- **如果 README.md 不存在**：使用以下模板创建

```markdown
# {文件夹名}

<!-- 一旦我所属的文件夹有所变化，请更新我 -->

## 架构说明

{3行以内的架构描述}

## 文件索引

- `file1.ts` - 功能描述
```

### 3. 上级目录传播

文件夹结构变化时，检查上级目录的 README.md 是否需要更新。

### 4. 文档维护报告

完成代码修改后，输出：

```
📝 文档维护报告
- 修改文件: [文件列表]
- README 更新: [是/否] [路径]
- 上级目录检查: [已检查/需更新]
```

## 项目结构

<!-- 自定义此部分以匹配你的项目 -->

### 核心目录

- `src/components/` - React 组件
- `src/services/` - 业务逻辑服务
- `src/models/` - 数据模型

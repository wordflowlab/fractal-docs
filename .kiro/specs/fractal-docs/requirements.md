# 需求文档

## 介绍

Fractal Docs 是一套面向 AI 编程助手的自维护文档系统。通过 Kiro Steering 机制（或其他 AI 编辑器的规则系统）自动加载文档维护规则，让 AI 在每次交互时都能理解项目结构并自动维护文档。

设计灵感来自《哥德尔、埃舍尔、巴赫》中的自指和递归概念。

## 术语表

- **Steering**: Kiro 的规则加载机制，通过 `.kiro/steering/*.md` 文件自动注入上下文
- **文件引用**: Kiro 的 `#[[file:path]]` 语法，自动拉取指定文件内容到上下文
- **分形结构**: 每个层级都遵循相同文档模式的递归结构
- **自指提醒**: 文档中包含的更新提醒文本，触发 AI 自动维护相关文档
- **三行注释**: 每个文件开头的 input/output/pos 标准注释格式

## 需求

### 需求 1: 多编辑器支持

**用户故事:** 作为开发者，我希望系统能支持多种 AI 编辑器。

#### 验收标准

1. Kiro: `.kiro/steering/` 配置
2. Cursor: `.cursor/rules/` 配置
3. Claude Code: `CLAUDE.md` + `.claude/rules/` 配置
4. Windsurf: `.windsurfrules` 配置
5. GitHub Copilot: `.github/copilot-instructions.md` 配置
6. Cline: `.clinerules` 配置
7. 通用: `AGENTS.md` 配置

### 需求 2: 双语支持

**用户故事:** 作为开发者，我希望能选择中文或英文版本。

#### 验收标准

1. 支持生成中文版规则和模板
2. 支持生成英文版规则和模板
3. 自指提醒使用对应语言

### 需求 3: 文档维护规则

**用户故事:** 作为开发者，我希望 AI 在修改代码时自动执行文档维护。

#### 验收标准

1. AI 修改代码时先读取现有文档再更新
2. AI 更新文件头部的 input/output/pos 注释
3. AI 更新所属文件夹的 README.md
4. AI 检查并更新上级目录的 README.md
5. AI 完成修改后输出文档维护报告

### 需求 4: 项目结构导航

**用户故事:** 作为开发者，我希望 AI 能快速了解我的项目结构。

#### 验收标准

1. Steering 系统通过文件引用自动加载核心目录的 README.md
2. 系统根据项目实际结构生成目录引用
3. 目录索引提供文件名和功能描述的对应关系

### 需求 5: 分形结构自维护

**用户故事:** 作为开发者，我希望文档系统能够通过自指机制实现自我维护。

#### 验收标准

1. 文档包含更新相关文档的自指提醒
2. 文件夹结构变化时自动更新 README.md
3. 新增文件时自动更新所属文件夹的文件索引

### 需求 6: 增量更新保护

**用户故事:** 作为开发者，我希望 AI 在更新文档时先读取现有内容再增量更新。

#### 验收标准

1. AI 更新 README.md 时先检查文件是否存在
2. README.md 已存在时先读取再增量更新
3. README.md 不存在时使用模板创建
4. 更新文件头部注释时保留现有注释并更新

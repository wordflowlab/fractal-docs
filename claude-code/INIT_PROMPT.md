# Fractal Docs 初始化任务

请帮我在这个项目中初始化 Fractal Docs 自维护文档系统。

## 你需要做的

### 1. 分析项目结构

- 扫描项目目录结构
- 识别技术栈（TypeScript/Go/Rust/Python 等）
- 确定核心业务目录（如 src/components、src/services 等）
- 列出建议索引的目录，让我确认

### 2. 创建 CLAUDE.md

在项目根目录创建 `CLAUDE.md`，包含：
- 项目基本信息
- 技术栈说明
- 引用 `.claude/rules/` 中的规则文件

### 3. 创建 .claude/rules/ 规则文件

#### 3.1 创建 `.claude/rules/doc-maintenance.md`

```markdown
---
paths:
  - "**/*.ts"
  - "**/*.tsx"
  - "**/*.js"
  - "**/*.jsx"
  - "**/*.go"
  - "**/*.rs"
  - "**/*.py"
---

# 文档维护规则

当你修改或创建代码文件时，**必须**执行以下步骤：

## 0. 先读取现有文档（重要！）

修改文件前，**必须先检查并读取**：
- 所属文件夹是否已有 README.md？**如果有，先读取它**
- 文件是否已有头部注释？**如果有，保留并更新**

⚠️ **禁止直接覆盖创建**！

## 1. 文件头部注释

每个代码文件必须有标准三行注释：
// input: {输入描述}
// output: {输出描述}
// pos: {架构位置描述}

## 2. 文件夹 README.md

修改文件后，更新所属文件夹的 README.md：
- 如果已存在：先读取，增量更新文件索引
- 如果不存在：创建新文件

## 3. 上级目录传播

检查上级目录的 README.md 是否需要更新。

## 4. 文档维护报告

完成后输出报告。
```

#### 3.2 创建 `.claude/rules/project-structure.md`

根据分析结果，使用 `@path/to/README.md` 语法引用核心目录。

### 4. 创建核心目录的 README.md

为每个核心目录创建 README.md，格式：

```markdown
# {目录名}

<!-- 一旦我所属的文件夹有所变化，请更新我 -->

## 架构说明

{3行以内的描述}

## 文件索引

- `file1.ts` - 功能描述
- `subfolder/` - 子目录描述
```

### 5. 确认完成

完成后告诉我生成了哪些文件。

## 语言偏好

请使用中文生成所有文档和注释。
